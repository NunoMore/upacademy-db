<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="WEB-INF/layouts/commonLayout.xhtml">

		<!-- menu lateral - botao remete para area de perfil pessoal -->
		<ui:define name="button1">
			<h:form>
				<h:commandButton value="My Profile" action="Persons/myProfileMenu"
					styleClass="btn btn-default" />
			</h:form>
		</ui:define>

		<!-- menu lateral - botao remete para menu que ve os colegas etc -->
		<ui:define name="button2">
			<h:form>
				<h:commandButton value="Enter in Database" action="dataBaseMenu"
					styleClass="btn btn-default" />
			</h:form>
		</ui:define>

		<ui:define name="display">
			<h:form id="formTable">
				<p:dataTable id="consultAll" var="person"
					value="#{personBean.readPerson()}" widgetVar="personsTable"
					multiViewState="true" rows="10" paginator="true"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15" selectionMode="single"
					selection="#{tableView.selectedPerson}" rowKey="#{person.ID}"
					emptyMessage="No persons found with that search criteria"
					filteredValue="#{tableView.filteredPersons}">

					<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="Search all fields:" />
							<p:inputText id="globalFilter"
								onkeyup="PF('personsTable').filter()" style="width:150px"
								placeholder="Search" />
						</p:outputPanel>
					</f:facet>

					<p:ajax event="rowSelect" update=":formTable:personDetail"
						oncomplete="PF('personDialog').show()" />

					<p:column headerText="Id" filterBy="#{person.ID}"
						sortBy="#{person.ID}" filterMatchMode="contains">
						<h:outputText value="#{person.ID}" />
					</p:column>

					<p:column headerText="Nome" filterBy="#{person.name}"
						sortBy="#{person.name}" filterMatchMode="startsWith">
						<h:outputText value="#{person.name}" />
					</p:column>

					<p:column headerText="Academia" filterBy="#{person.academy}"
						sortBy="#{person.academy}" filterMatchMode="exact">
						<f:facet name="filter">
							<p:selectOneMenu onchange="PF('personsTable').filter()"
								style="width:100px;">
								<f:selectItem itemLabel="Academias" itemValue="#{null}"
									noSelectionOption="true" />
								<f:selectItems value="#{tableView.academies}" />
							</p:selectOneMenu>
						</f:facet>
						<h:outputText value="#{person.academy}" />
					</p:column>

					<!-- <p:column headerText="" filterBy="#{car.color}"
					sortBy="#{car.color}" filterMatchMode="in">
					<f:facet name="filter">
						<p:selectCheckboxMenu label="Colors"
							onchange="PF('carsTable').filter()" style="width:80px;"
							panelStyle="width:125px" scrollHeight="150">
							<f:selectItems value="#{dtTableStateView.colors}" />
						</p:selectCheckboxMenu>
					</f:facet>
					<h:outputText value="#{car.color}" />
				</p:column> -->
				</p:dataTable>

				<p:dialog header="helooooo" widgetVar="personDialog" modal="true"
					showEffect="explode" hideEffect="bounce" resizable="false">
					<p:outputPanel id="personDetail" style="text-align:center;">
						<p:panelGrid columns="2"
							rendered="#{not empty tableView.selectedPerson}"
							columnClasses="label,value">
							<f:facet name="header">
								<p:graphicImage name="resources/fotos/nuno_moreira.jpg" />
								<!-- colocar o seguinte:  resources/fotos/tableView.selectedPerson.photo-->
							</f:facet>

							<h:outputText value="Id" />
							<h:outputText value="#{tableView.selectedPerson.ID}" />

							<h:outputText value="Nome" />
							<h:outputText value="#{tableView.selectedPerson.name}" />

							<h:outputText value="Academia" />
							<h:outputText value="#{tableView.selectedPerson.academy}" />

							<!-- meter aqui email -->

							<h:outputText value="Tlm" />
							<h:outputText value="#{tableView.selectedPerson.numTelephone}" />

							<h:outputText value="Facebook" />
							<h:link value="#{tableView.selectedPerson.facebookLink}" />

							<h:outputText value="LinkedIn" />
							<h:link value="#{tableView.selectedPerson.linkedInLink}" />

							<h:outputText value="Git Hub" />
							<h:link value="#{tableView.selectedPerson.gitHubLink}" />

							<h:outputText value="LinkedIn" />
							<h:link value="#{tableView.selectedPerson.linkedInLink}" />
						</p:panelGrid>
					</p:outputPanel>
				</p:dialog>
			</h:form>
		</ui:define>
	</ui:composition>